{"ast":null,"code":"import _slicedToArray from\"/Users/aarnihuuskonen/Documents/fullstack/part3/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import personService from'./modules/coms';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShowPersons=function ShowPersons(props){var filtered=props.filter===''?props.persons:props.persons.filter(function(person){return person.name.toLowerCase().includes(props.filter.toLowerCase());});return/*#__PURE__*/_jsx(\"ul\",{children:filtered.map(function(person){return/*#__PURE__*/_jsx(ShowSingle,{id:person.id,name:person.name,number:person.number,removePerson:props.removePerson,children:\" \"},person.id);})});};var ShowSingle=function ShowSingle(props){return/*#__PURE__*/_jsxs(\"li\",{children:[props.name,\" \",props.number,\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.removePerson(props.id);},children:\"delete\"}),\"  \"]},props.id);};var AddNew=function AddNew(props){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add new\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:props.addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:props.newName,onChange:props.handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:props.newNumber,onChange:props.handleNumberChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]})]});};var Filter=function Filter(props){return/*#__PURE__*/_jsx(\"input\",{value:props.filter,onChange:props.handleFilterChange});};var Notification=function Notification(props){if(props.message===null){return null;}else if(props.message.includes(\"already\")){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:props.message});}return/*#__PURE__*/_jsx(\"div\",{className:\"addition\",children:props.message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);var handleNameChange=function handleNameChange(event){event.preventDefault();setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){event.preventDefault();setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){event.preventDefault();setFilter(event.target.value);};var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNumber};if(persons.map(function(person){return person.name===personObject.name;}).includes(true)){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace old number with new one?\"))){var id=persons.filter(function(person){return person.name===newName;})[0].id;personService.update(id,personObject).then(function(returnedPerson){setPersons(persons.map(function(person){return person.id!==id?person:returnedPerson;}));setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);},5000);});}}else{personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);},5000);setNewName('');setNewNumber('');});}};var removePerson=function removePerson(event){var removable=persons.filter(function(person){return person.id===event;});if(window.confirm(\"Delete \".concat(removable[0].name,\"?\"))){personService.remove(event).then(setPersons(persons.filter(function(person){return person.id!==event;}))).catch(function(error){setMessage(\"Information of \".concat(removable.name,\" has already been deleted!\"));setTimeout(function(){setMessage(null);},5000);});}setNewName('');setNewNumber('');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filter:filter,handleFilterChange:handleFilterChange}),/*#__PURE__*/_jsx(AddNew,{addPerson:addPerson,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(ShowPersons,{persons:persons,filter:filter,removePerson:removePerson})]});};export default App;","map":{"version":3,"names":["useEffect","useState","personService","ShowPersons","props","filtered","filter","persons","person","name","toLowerCase","includes","map","id","number","removePerson","ShowSingle","AddNew","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Filter","handleFilterChange","Notification","message","App","setPersons","setNewName","setNewNumber","setFilter","setMessage","getAll","then","initialPersons","event","preventDefault","target","value","personObject","window","confirm","update","returnedPerson","setTimeout","create","concat","removable","remove","catch","error"],"sources":["/Users/aarnihuuskonen/Documents/fullstack/part3/frontend/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport personService from './modules/coms'\n\nconst ShowPersons = (props) => {\n  const filtered = props.filter === ''\n  ? props.persons \n  : props.persons.filter(person => person.name.toLowerCase().includes(props.filter.toLowerCase())) \n  return (\n    <ul>\n      {filtered.map(person =>\n        <ShowSingle key = {person.id} id = {person.id} name = {person.name} number = {person.number} removePerson = {props.removePerson} > </ShowSingle>)}   \n    </ul>\n  )\n}\n\nconst ShowSingle = (props) => {\n  return (\n    <li key = {props.id}>{props.name} {props.number} <button onClick = {() => props.removePerson(props.id)} >delete</button>  </li> \n  )\n}\n\nconst AddNew = (props) => {\n  return (\n    <div>\n      <h2>Add new</h2>\n      <form onSubmit={props.addPerson} >\n        <div>\n          name: <input \n            value = {props.newName}\n            onChange = {props.handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input\n            value = {props.newNumber}\n            onChange = {props.handleNumberChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n    <input \n    value = {props.filter}\n    onChange = {props.handleFilterChange}\n    ></input>\n  )\n}\n\nconst Notification = (props) => {\n  if (props.message === null) {\n    return null\n  } else if (props.message.includes(\"already\")) {\n    return (\n      <div className='error'>\n        {props.message}\n      </div>\n    )\n  }\n\n  return (\n    <div className='addition'>\n    {props.message}\n  </div>    \n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleNameChange = (event) => {\n    event.preventDefault()\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    event.preventDefault()\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    event.preventDefault()\n    setFilter(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    if(persons.map(person => person.name ===  personObject.name).includes(true)) {\n      if(window.confirm(`${newName} is already added to phonebook, replace old number with new one?`)) {\n        const id = persons.filter(person => person.name === newName)[0].id\n        personService\n          .update(id, personObject)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n            setMessage(\n              `Added ${newName}`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    } else {\n        personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setMessage(\n            `Added ${newName}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n      }\n    }\n  \n  const removePerson = (event) => {\n    const removable = persons.filter(person => person.id === event)\n    if(window.confirm(`Delete ${removable[0].name}?`)) {\n      personService\n        .remove(event)\n        .then(setPersons(persons.filter(person => person.id !== event)))\n        .catch(error => {\n          setMessage(\n            `Information of ${removable.name} has already been deleted!`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          })\n      }\n      setNewName('')\n      setNewNumber('')      \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message = {message}></Notification>\n      <Filter filter = {filter} handleFilterChange = {handleFilterChange} ></Filter>\n      <AddNew addPerson = {addPerson} newName = {newName} handleNameChange = {handleNameChange} newNumber = {newNumber} handleNumberChange = {handleNumberChange}></AddNew>\n      <h2>Numbers</h2>\n      <ShowPersons persons = {persons} filter = {filter} removePerson = {removePerson} ></ShowPersons>\n    </div> \n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}